Жизненный цикл реактивного стрима (Reactive Stream) включает ряд событий, которые определяют его поведение от создания до завершения. Вот ключевые этапы и события:

---

### **1. Создание стрима (Creation)**
Стрим создается с помощью методов-источников (например, `just`, `create`, `fromIterable` в Project Reactor или RxJava):
```java
Flux<String> stream = Flux.just("A", "B", "C");
```

---

### **2. Подписка (Subscription)**
Стрим начинает работу только после подписки (Subscribe). Без подписки данные не обрабатываются.
```java
stream.subscribe(
    value -> System.out.println("Received: " + value), // onNext
    error -> System.err.println("Error: " + error),    // onError
    () -> System.out.println("Completed")              // onComplete
);
```

---

### **3. События жизненного цикла**
#### **• `onSubscribe`**
- Вызывается при подписке.
- Передает объект `Subscription`, который управляет запросами данных (например, `request(n)` для backpressure).

#### **• `onNext`**
- Срабатывает для каждого элемента данных.
- Обрабатывает элемент (например, фильтрация, преобразование).

#### **• `onError`**
- Вызывается при ошибке (исключение в стриме).
- Прерывает выполнение и завершает стрим.

#### **• `onComplete`**
- Уведомляет об успешном завершении стрима (все данные обработаны).
- Не вызывается после `onError`.

---

### **4. Операторы (Operators)**
Между событиями применяются операторы для трансформации данных:
- **Промежуточные (Intermediate)**:  
  `map`, `filter`, `flatMap`, `delayElements` — не запускают выполнение, а формируют цепочку обработки.
- **Терминальные (Terminal)**:  
  `subscribe`, `blockLast`, `collectList` — запускают выполнение стрима.

Пример:
```java
Flux.range(1, 5)
    .map(i -> i * 2)          // Промежуточный оператор
    .filter(i -> i > 5)       // Промежуточный оператор
    .subscribe(System.out::println); // Терминальный оператор
```

---

### **5. Обратное давление (Backpressure)**
Механизм контроля скорости данных:
- Подписчик запрашивает данные через `Subscription.request(n)`.
- Если данные поступают быстрее, чем обрабатываются, буфер ограничивается или применяются стратегии (пропуск, буферизация).

---

### **6. Отмена (Cancellation)**
Подписка может быть отменена через `Subscription.cancel()`, что останавливает стрим до его завершения.

---

### **Визуализация жизненного цикла**
```
Создание → Подписка → onSubscribe → Запрос данных (request) → 
→ onNext (0..N раз) → (onError | onComplete) → Завершение.
```

---

### **Пример с ошибкой**
```java
Flux<String> stream = Flux.error(new RuntimeException("Oops!"));
stream.subscribe(
    value -> {},
    error -> System.out.println("Error: " + error), // Сработает onError
    () -> {} // onComplete не вызовется
);
```

---

### **Итог**
Реактивные стримы работают по принципу **ленивой обработки** (lazy evaluation): данные начинают передаваться только после подписки. Жизненный цикл управляется событиями `onSubscribe`, `onNext`, `onError`, `onComplete` и механизмом обратного давления.