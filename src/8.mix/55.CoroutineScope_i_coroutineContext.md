–ö–æ–Ω–µ—á–Ω–æ! –î–∞–≤–∞–π—Ç–µ —Ä–∞–∑–±–µ—Ä—ë–º –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ `CoroutineScope` –∏ `coroutineContext` –≤ Kotlin, –∫–∞–∫ —ç—Ç–æ –º–æ–≥–ª–æ –±—ã –±—ã—Ç—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–æ –≤ —Ñ–∞–π–ª–µ `55.CoroutineScope_i_coroutineContext.md`. –≠—Ç–∏ –¥–≤–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ —Ç–µ—Å–Ω–æ —Å–≤—è–∑–∞–Ω—ã –∏ –∏–≥—Ä–∞—é—Ç –∫–ª—é—á–µ–≤—É—é —Ä–æ–ª—å –≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –∫–æ—Ä—É—Ç–∏–Ω–∞–º–∏.

---

### **1. CoroutineScope**
`CoroutineScope` ‚Äî —ç—Ç–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –∫–æ—Ç–æ—Ä—ã–π –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –æ–±–ª–∞—Å—Ç—å –∂–∏–∑–Ω–∏ –∫–æ—Ä—É—Ç–∏–Ω. –û–Ω –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç **—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º**, –ø–æ–∑–≤–æ–ª—è—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ—Ä—É—Ç–∏–Ω—ã –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å –∏—Ö –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç–º–µ–Ω—è—Ç—å –≤—Å–µ –∫–æ—Ä—É—Ç–∏–Ω—ã –≤ scope –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ).

#### **–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- **–°–≤–æ–π—Å—Ç–≤–æ `coroutineContext`**: –ö–∞–∂–¥—ã–π `CoroutineScope` —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç (`CoroutineContext`), –∫–æ—Ç–æ—Ä—ã–π –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –≤—Å–µ–º–∏ –∫–æ—Ä—É—Ç–∏–Ω–∞–º–∏, –∑–∞–ø—É—â–µ–Ω–Ω—ã–º–∏ –≤ —ç—Ç–æ–º scope.
- **–ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª**: –ö–æ–≥–¥–∞ scope –æ—Ç–º–µ–Ω—è–µ—Ç—Å—è (—á–µ—Ä–µ–∑ `cancel()`), –≤—Å–µ –∫–æ—Ä—É—Ç–∏–Ω—ã –≤–Ω—É—Ç—Ä–∏ –Ω–µ–≥–æ —Ç–∞–∫–∂–µ –æ—Ç–º–µ–Ω—è—é—Ç—Å—è.
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
    - –í Android: `viewModelScope`, `lifecycleScope` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–º–µ–Ω—è—é—Ç –∫–æ—Ä—É—Ç–∏–Ω—ã –ø—Ä–∏ —Ä–∞–∑—Ä—É—à–µ–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.
    - –í—Ä—É—á–Ω—É—é: –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π scope —á–µ—Ä–µ–∑ `CoroutineScope(Dispatchers.IO + Job())`.

#### **–ü—Ä–∏–º–µ—Ä:**
```kotlin
val customScope = CoroutineScope(Dispatchers.Main + Job())
customScope.launch {
    println("–ö–æ—Ä—É—Ç–∏–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ: ${coroutineContext}")
}
// –û—Ç–º–µ–Ω–∞ –≤—Å–µ—Ö –∫–æ—Ä—É—Ç–∏–Ω –≤ scope
customScope.cancel()
```

---

### **2. CoroutineContext**
`CoroutineContext` ‚Äî —ç—Ç–æ –Ω–∞–±–æ—Ä —ç–ª–µ–º–µ–Ω—Ç–æ–≤, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∏—Ö –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∫–æ—Ä—É—Ç–∏–Ω—ã. –û–Ω –≤–∫–ª—é—á–∞–µ—Ç:
- **–î–∏—Å–ø–µ—Ç—á–µ—Ä (Dispatcher)**: –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ—Ç–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `Dispatchers.IO`, `Dispatchers.Main`).
- **Job**: –£–ø—Ä–∞–≤–ª—è–µ—Ç –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –∫–æ—Ä—É—Ç–∏–Ω—ã.
- **–≠–ª–µ–º–µ–Ω—Ç—ã –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞**: –ú–æ–≥—É—Ç –±—ã—Ç—å –æ–±—ä–µ–¥–∏–Ω–µ–Ω—ã —á–µ—Ä–µ–∑ –æ–ø–µ—Ä–∞—Ç–æ—Ä `+`.

#### **–≠–ª–µ–º–µ–Ω—Ç—ã –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞:**
- **Dispatcher**: `Dispatchers.Default` (CPU-–∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏), `Dispatchers.IO` (I/O –æ–ø–µ—Ä–∞—Ü–∏–∏).
- **Job**: –ü–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ—Ä—É—Ç–∏–Ω—ã (–∞–∫—Ç–∏–≤–Ω–∞, –∑–∞–≤–µ—Ä—à–µ–Ω–∞, –æ—Ç–º–µ–Ω–µ–Ω–∞).
- **CoroutineName**: –ò–º—è –∫–æ—Ä—É—Ç–∏–Ω—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏.
- **ExceptionHandler**: –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–µ–æ—Ç–ª–æ–≤–ª–µ–Ω–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è.

#### **–ü—Ä–∏–º–µ—Ä:**
```kotlin
val context = Dispatchers.IO + CoroutineName("MyCoroutine") + Job()
val job = CoroutineScope(context).launch {
    println("–ò–º—è –∫–æ—Ä—É—Ç–∏–Ω—ã: ${coroutineContext[CoroutineName]?.name}")
}
```

---

### **3. –í–∑–∞–∏–º–æ—Å–≤—è–∑—å CoroutineScope –∏ coroutineContext**
- `CoroutineScope` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `coroutineContext` –∫–∞–∫ "—Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã–π –±–ª–æ–∫" –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ—Ä—É—Ç–∏–Ω.
- –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∫–æ—Ä—É—Ç–∏–Ω—ã —á–µ—Ä–µ–∑ `launch` –∏–ª–∏ `async` –µ—ë –∫–æ–Ω—Ç–µ–∫—Å—Ç –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –∏–∑ scope, –Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω:
  ```kotlin
  scope.launch(Dispatchers.Default) {
      // –≠—Ç–∞ –∫–æ—Ä—É—Ç–∏–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Dispatchers.Default –≤–º–µ—Å—Ç–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ scope.
  }
  ```

---

### **4. –í–∞–∂–Ω—ã–µ –Ω—é–∞–Ω—Å—ã**
1. **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º**:
    - –ö–æ—Ä—É—Ç–∏–Ω—ã, –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ –≤–Ω—É—Ç—Ä–∏ –¥—Ä—É–≥–æ–π –∫–æ—Ä—É—Ç–∏–Ω—ã, –Ω–∞—Å–ª–µ–¥—É—é—Ç –µ—ë –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏ –ø—Ä–∏–≤—è–∑—ã–≤–∞—é—Ç—Å—è –∫ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π Job.
    - –û—Ç–º–µ–Ω–∞ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π –∫–æ—Ä—É—Ç–∏–Ω—ã –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –æ—Ç–º–µ–Ω–µ –≤—Å–µ—Ö –¥–æ—á–µ—Ä–Ω–∏—Ö.

2. **GlobalScope** (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):
    - –ö–æ—Ä—É—Ç–∏–Ω—ã –≤ `GlobalScope` –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–º—É –∂–∏–∑–Ω–µ–Ω–Ω–æ–º—É —Ü–∏–∫–ª—É. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –¥–ª—è –∑–∞–¥–∞—á, –∂–∏–≤—É—â–∏—Ö –≤—Å—ë –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

3. **–°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö Scope**:
   ```kotlin
   class MyComponent {
       private val job = Job()
       private val scope = CoroutineScope(Dispatchers.Main + job)
       
       fun destroy() {
           job.cancel() // –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –∫–æ—Ä—É—Ç–∏–Ω
       }
   }
   ```

---

### **5. –ò—Ç–æ–≥**
- **CoroutineScope** ‚Äî —ç—Ç–æ "–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä" –¥–ª—è –∫–æ—Ä—É—Ç–∏–Ω, —É–ø—Ä–∞–≤–ª—è—é—â–∏–π –∏—Ö –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º.
- **CoroutineContext** ‚Äî —ç—Ç–æ "–Ω–∞—Å—Ç—Ä–æ–π–∫–∏" –∫–æ—Ä—É—Ç–∏–Ω—ã (–ø–æ—Ç–æ–∫, –∏–º—è, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫).
- –í—Å–µ–≥–¥–∞ –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º —á–µ—Ä–µ–∑ –∫–∞—Å—Ç–æ–º–Ω—ã–µ scope, —á—Ç–æ–±—ã –∏–∑–±–µ–≥–∞—Ç—å —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏.

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –Ω—É–∂–Ω—ã –ø—Ä–∏–º–µ—Ä—ã –∏–∑ –≤–∞—à–µ–≥–æ —Ñ–∞–π–ª–∞ ‚Äî –¥–µ–ª–∏—Ç–µ—Å—å –¥–µ—Ç–∞–ª—è–º–∏! üòä