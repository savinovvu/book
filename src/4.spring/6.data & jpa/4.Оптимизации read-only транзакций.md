**Read-only транзакция** — это транзакция, которая гарантирует только чтение данных без их модификации. В контексте Spring и JPA/Hibernate такие транзакции предоставляют ряд оптимизаций для повышения производительности и снижения накладных расходов.

---

### **Основные оптимизации:**

1. **Отключение механизмов записи**
    - Hibernate (и другие JPA-провайдеры) пропускает этапы `flush` (синхронизация состояния persistence context с БД), так как изменения данных не ожидаются.
    - Не выполняется проверка «грязных» данных (dirty checking) в persistence context, что снижает нагрузку на приложение.

2. **Настройки СУБД**
    - База данных может использовать менее строгие уровни изоляции (например, `READ COMMITTED` вместо `REPEATABLE READ`) для read-only операций.
    - Некоторые СУБД (например, PostgreSQL, MySQL) оптимизируют выполнение запросов, если знают, что транзакция не изменяет данные.

3. **Работа с репликами**
    - В реплицированных базах данных read-only транзакции могут перенаправляться на реплики для чтения, разгружая основной сервер.

4. **Управление ресурсами**
    - Spring может использовать стратегию `readOnly=true` для выбора соответствующего `DataSource` (например, подключение к реплике БД).
    - В режиме `readOnly` некоторые провайдеры JPA избегают блокировок (например, `SELECT ... FOR UPDATE`).

5. **Кэширование**
    - Результаты запросов в read-only транзакциях чаще кэшируются, так как данные не меняются.

---

### **Пример в Spring**
```java
@Transactional(readOnly = true)
public List<User> findAllUsers() {
    return userRepository.findAll();
}
```

---

### **Особенности Hibernate**
- При вызове методов модификации (например, `save()`) в read-only транзакции Hibernate выбрасывает исключение `PersistenceException`.
- Если используется `flush()` вручную, изменения не будут отправлены в БД (игнорируются).

---

### **Когда использовать?**
- Сервисы, выполняющие только запросы на чтение (отчеты, поиск, аналитика).
- Интеграция с репликами БД для распределения нагрузки.
- Сценарии, где требуется высокая производительность чтения.

---

### **Важно**
- `readOnly=true` — это **подсказка** (hint), а не строгая гарантия. Реальная поддержка зависит от провайдера JPA и СУБД.
- Всегда проверяйте, что внутри метода не выполняются операции записи, иначе возможны неожиданные ошибки.

Использование read-only транзакций — одна из ключевых практик оптимизации производительности в высоконагруженных приложениях.